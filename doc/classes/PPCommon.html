<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Module: PPCommon</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Module</strong></td>
          <td class="class-name-in-header">PPCommon</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/lib/PPCommon_rb.html">
                lib/PPCommon.rb
                </a>
        <br />
            </td>
        </tr>

        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <p>
This is the collection of methods that are common to the ParanoidPackrat
project.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000002">addSlash</a>&nbsp;&nbsp;
      <a href="#M000006">containsBackups?</a>&nbsp;&nbsp;
      <a href="#M000003">datetimeFormat?</a>&nbsp;&nbsp;
      <a href="#M000005">makeBackupDirectory</a>&nbsp;&nbsp;
      <a href="#M000001">pprint</a>&nbsp;&nbsp;
      <a href="#M000004">scanBackupDir</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Class methods</h3>

      <div id="method-M000002" class="method-detail">
        <a name="M000002"></a>

        <div class="method-heading">
          <a href="PPCommon.src/M000002.html" target="Code" class="method-signature"
            onclick="popupCode('PPCommon.src/M000002.html');return false;">
          <span class="method-name">addSlash</span><span class="method-args">(name)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
Add a slash to the end of name if there isn&#8216;t already one there.
</p>
        </div>
      </div>

      <div id="method-M000006" class="method-detail">
        <a name="M000006"></a>

        <div class="method-heading">
          <a href="PPCommon.src/M000006.html" target="Code" class="method-signature"
            onclick="popupCode('PPCommon.src/M000006.html');return false;">
          <span class="method-name">containsBackups?</span><span class="method-args">(backup_dir)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
This method is used to determine if a backup dir contains backups or not.
Basically, its used to tell if this if the first run backup, or if there
are others that it can use to help shrink the size of the backup.
</p>
<p>
It will look for any directories underneath backup_dir, if they also
contain a directory which has the correct date time format, and there is a
last_backup symlink pointing to a dir, then it will return TRUE that yes
there is at least one existing backup meaning this is not the first run.
Otherwise, if there are no directories underneath backup_dir which also
contain a dir with the name in the right date time format which also
contains a last_backup symlink, it will return FALSE signaling that this is
the first run. If backup_dir does not exist, or there are other files in
backup_dir, it will simply return FALSE. NOTE - backup_dir is expected to
be a full path
</p>
        </div>
      </div>

      <div id="method-M000003" class="method-detail">
        <a name="M000003"></a>

        <div class="method-heading">
          <a href="PPCommon.src/M000003.html" target="Code" class="method-signature"
            onclick="popupCode('PPCommon.src/M000003.html');return false;">
          <span class="method-name">datetimeFormat?</span><span class="method-args">(str)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
returns TRUE if str matches the date time format expected to be found in
the backup destination folders otherwise, returns FALSE
</p>
        </div>
      </div>

      <div id="method-M000005" class="method-detail">
        <a name="M000005"></a>

        <div class="method-heading">
          <a href="PPCommon.src/M000005.html" target="Code" class="method-signature"
            onclick="popupCode('PPCommon.src/M000005.html');return false;">
          <span class="method-name">makeBackupDirectory</span><span class="method-args">(dir)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
<a href="PPCommon.html#M000005">makeBackupDirectory</a>(dir) creates the
backup directory structure to store the backups in. dir is expected to be a
directory, such as say, &quot;/mnt&quot; or &quot;/mnt/&quot;. Using that
example, it would create the dir &quot;/mnt/backup/&quot;, it will return
FALSE unless directory (&quot;/mnt/backup/&quot; in this case) exists and
is not empty. Otherwise, it will return the path of the directory that was
just created.
</p>
        </div>
      </div>

      <div id="method-M000001" class="method-detail">
        <a name="M000001"></a>

        <div class="method-heading">
          <a href="PPCommon.src/M000001.html" target="Code" class="method-signature"
            onclick="popupCode('PPCommon.src/M000001.html');return false;">
          <span class="method-name">pprint</span><span class="method-args">(str)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
<a href="PPCommon.html#M000001">pprint</a> is a function to help control
output based on silent mode or not. This is called from other internal
methods to print output, which is then only displayed if we are not in
silent mode.
</p>
        </div>
      </div>

      <div id="method-M000004" class="method-detail">
        <a name="M000004"></a>

        <div class="method-heading">
          <a href="PPCommon.src/M000004.html" target="Code" class="method-signature"
            onclick="popupCode('PPCommon.src/M000004.html');return false;">
          <span class="method-name">scanBackupDir</span><span class="method-args">(backup)</span>
          </a>
        </div>
      
        <div class="method-description">
          <p>
<a href="PPCommon.html#M000004">scanBackupDir</a>(backup) will scan the
dir/file specified in backup[:BackupTarget], and will return an array with
the full path of every file covered by backup[:BackupTarget], excluding
anything specified in backup[:Exclusions].
</p>
<p>
<b>Note</b> backup is expected to be one of the configs from <a
href="PPackratConfig.html#M000016">PPackratConfig.dumpConfig</a> and <a
href="PPackratConfig.html#M000008">PPackratConfig.sanityCheck</a> is
expected to have been run already.
</p>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>